---
---

/*
 * This file controls what is imported from /_sass
 *
 * Note that the files are processed in the order they are imported, so they are partly
   sorted by the dependencies. Also, the first two lines of the file are required by Jekyll
 */




@import
    "vendor/breakpoint/breakpoint",

    "themes",
    "theme/default",
    // "theme/dark",

    "include/mixins",
    "vendor/susy/susy",

    "layout/reset",
    "layout/base",

    "include/utilities",
    "layout/tables",
    "layout/buttons",
    "layout/notices",
    "layout/masthead",
    "layout/navigation",
    "layout/footer",
    "syntax",

    "layout/forms",

    "layout/page",
    "layout/archive",
    "layout/sidebar",

    "vendor/font-awesome/fontawesome",
    "vendor/font-awesome/solid",
    "vendor/font-awesome/brands"
;

/* Background is handled by pseudo-elements now — turn off body bg */
html, body {
  min-height: 100%;
  margin: 0;
  padding: 0;
  background: none !important;
}
/* subtle dark overlay for readability */
html::after {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;                  /* above the image, behind content */
  background: rgba(0,0,0,0.18);  /* tweak 0.12–0.22 to taste */
  pointer-events: none;
}


/* Full-screen star image behind all content (no "fixed" seam) */
html { position: relative; }  /* create stacking context */

html::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -2;  /* bottommost layer */
  background: url("../../space_image.png") center center / cover no-repeat;
  /* help certain GPUs avoid micro-seams */
  transform: translateZ(0);
  will-change: transform;
}

/* === MAKE THEME WRAPPERS TRANSPARENT SO THE STARS SHOW THROUGH === */
/* Minimal Mistakes / AcademicPages commonly used wrappers */
.initial-content,
.page,
.page__inner-wrap,
.page__content,
.page__footer,
.sidebar,
.sidebar__right,
.layout--single,
.layout--home,
.archive,
#main,
#content,
.wrapper,
.container {
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
}

/* Deep-space BLUE nav (semi-opaque, blends with starfield) */
$nav-blue-top: rgba(18, 44, 96, 0.92);   // slightly brighter blue
$nav-blue-btm: rgba(12, 36, 84, 0.88);   // deeper blue

.masthead,
.masthead__inner-wrap,
.masthead__menu,
#site-nav.greedy-nav,
#site-nav.greedy-nav .visible-links,
#site-nav.greedy-nav .hidden-links,
.greedy-nav,
.masthead__menu-item,
.masthead__menu-item > a,
.greedy-nav .visible-links,
.greedy-nav .visible-links li,
.greedy-nav .hidden-links,
.greedy-nav .hidden-links li {
  background: linear-gradient(180deg, $nav-blue-top 0%, $nav-blue-btm 100%) !important;
  border: 0 !important;
  border-radius: 0 !important;
  box-shadow: 0 1px 0 rgba(255,255,255,0.08) inset !important; /* subtle divider */
  backdrop-filter: saturate(120%) blur(2px); /* optional; remove if you dislike blur */
}

/* remove any theme hairlines */
.masthead::before,
.greedy-nav::before,
.masthead__menu::before,
.masthead__menu::after,
.greedy-nav .visible-links::before,
.greedy-nav .visible-links::after { content: none !important; }

/* link colors on the blue */
.masthead a,
.greedy-nav a { color: #eaf2ff !important; }
.greedy-nav a:hover { color: #ffffff !important; opacity: 1; }


/* Nav text color */
.masthead a,
.greedy-nav a {
  color: #fff !important;
}
.greedy-nav a:hover {
  opacity: .85;
}

/* Search bar transparent/dark to match */
.search__toggle,
.search-content {
  background: rgba(5, 10, 20, 0.9) !important;
  box-shadow: none !important;
  border: 0 !important;
}


// trying to change colors of prev and next buttons
/* Make Prev/Next buttons white text */
a.pagination--pager {
  color: #fff !important;
  background: rgba(0,0,0,0.25) !important;  /* optional */
  border-color: rgba(255,255,255,0.55) !important;
  text-decoration: none !important;
}

/* Hover/focus state */
a.pagination--pager:hover,
a.pagination--pager:focus {
  color: #fff !important;
  background: rgba(255,255,255,0.08) !important;
  border-color: rgba(255,255,255,0.85) !important;
}



/* ==== Disable theme switching + force white text everywhere ==== */

/* Hide any theme toggle button if present */
#theme-toggle,
li#theme-toggle { display: none !important; }

/* Freeze Minimal Mistakes variables to a single palette */
:root,
html,
html[data-theme],
html[data-theme="light"],
html[data-theme="dark"],
body[data-theme="light"],
body[data-theme="dark"] {
  --global-text-color: #ffffff !important;        /* main body text */
  --global-base-color: #ffffff !important;
  --global-masthead-link-color: #ffffff !important;

  /* keep bg variables neutral because you use an image */
  --global-bg-color: transparent !important;
  --global-footer-bg-color: transparent !important;
  --global-border-color: rgba(255,255,255,0.20) !important;
  --global-dark-border-color: rgba(255,255,255,0.35) !important;
  --global-thead-color: rgba(255,255,255,0.12) !important;
}

/* Make sure actual text uses white, even if some pieces don't use variables */
body,
.page,
.page__content,
.initial-content,
.archive,
.sidebar,
.page__footer,
.page__content p,
.page__content li,
.page__content dl,
.page__content dt,
.page__content dd,
small, time, figcaption {
  color: #ffffff !important;
}

/* Headings stay bright */
h1, h2, h3, h4, h5, h6 { color: #ffffff !important; }

/* If you’re using an overlay, keep it BEHIND the content so it doesn't dim text */
html { position: relative; }
/* Overlay goes BEHIND everything so it can't dim content */
html { position: relative; }

html::after {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;                 /* was 0 */
  background: rgba(0,0,0,0.18);/* tweak 0.12–0.22 to taste */
  pointer-events: none;
}

/* Remove any mid-page bands/strips */
.initial-content::before,
.initial-content::after,
.page::before,
.page::after,
.page__inner-wrap::before,
.page__inner-wrap::after,
.page__content::before,
.page__content::after,
.page__footer::before,
.page__footer::after {
  content: none !important;
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
}

/* Make sure wrappers themselves are transparent */
.page__content,
.page__inner-wrap,
.initial-content,
.page__footer {
  background: transparent !important;
}

.masthead,
.masthead__inner-wrap,
.masthead__menu,
#site-nav.greedy-nav,
#site-nav.greedy-nav .visible-links,
#site-nav.greedy-nav .hidden-links,
.greedy-nav,
.masthead__menu-item,
.masthead__menu-item > a,
.greedy-nav .visible-links,
.greedy-nav .visible-links li,
.greedy-nav .hidden-links,
.greedy-nav .hidden-links li {
  backdrop-filter: none !important;
}
/* 1) Turn OFF the fixed background on html/body */
html, body { background: none !important; }

/* 2) Draw the stars BEHIND everything with a pseudo-element */
html { position: relative; }
html::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -2;  /* bottom layer */
  background: url("../../space_image.png") center center / cover no-repeat;
  /* helps kill tiling seams on some GPUs */
  transform: translateZ(0);
  will-change: transform;
}

/* 3) Keep the dark overlay, but behind content (you already had this) */
html::after {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;                 /* above image, behind content */
  background: rgba(0,0,0,0.18);
  pointer-events: none;
}

.masthead,
.masthead__inner-wrap,
.masthead__menu,
#site-nav.greedy-nav,
#site-nav.greedy-nav .visible-links,
#site-nav.greedy-nav .hidden-links,
.greedy-nav,
.masthead__menu-item,
.masthead__menu-item > a,
.greedy-nav .visible-links,
.greedy-nav .visible-links li,
.greedy-nav .hidden-links,
.greedy-nav .hidden-links li {
  box-shadow: none !important;     /* remove any bottom edge line */
  backdrop-filter: none !important;
}


/* Flash David Goggins over the avatar, then reveal your photo */
$goggins: "{{ '/images/IMG_3341.png' | relative_url }}";  /* it's at site root */

.author__avatar,
.sidebar .author__avatar {
  position: relative;
  overflow: hidden;
  border-radius: 9999px;
}

.author__avatar::before,
.sidebar .author__avatar::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 2;
  border-radius: inherit;
  background: url(#{$goggins}) center / cover no-repeat;
  pointer-events: none;

  animation: goggins-flash 0.5s ease-out forwards;
}

@keyframes goggins-flash { to { opacity: 0; } }

@media (prefers-reduced-motion: reduce) {
  .author__avatar::before,
  .sidebar .author__avatar::before {
    animation: none;
    opacity: 0;
  }
}

/* Temporary overlay for the 0.5s flash */
.flash-goggins {
  position: absolute;
  inset: 0;
  z-index: 3;
  width: 100%;
  height: 100%;
  object-fit: cover;           /* fill the circle */
  border-radius: inherit;      /* stay circular */
  pointer-events: none;
  animation: flash-out 0.5s ease-out forwards;
}

@keyframes flash-out { to { opacity: 0; } }

/* Make sure the avatar wraps can clip the overlay */
.author__avatar,
.sidebar .author__avatar { position: relative; overflow: hidden; border-radius: 9999px; }

/* Full-page flash overlay */
.flash-full {
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  background: transparent;
  opacity: 1;
  transition: opacity 0.5s ease-out;
}
.flash-full img {
  width: 220px; height: 220px;      /* tweak size */
  border-radius: 9999px;             /* circle */
  object-fit: cover;
  box-shadow: 0 12px 40px rgba(0,0,0,0.5);
}
@media (prefers-reduced-motion: reduce) {
  .flash-full { display: none; }
}

